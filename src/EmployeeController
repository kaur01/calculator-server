import {Response} from 'express';
import {HttpStatusCode} from "./HttpStatusCode";
import {controller, httpPost, requestBody, response} from "inversify-express-utils";

import EmployeeModel = require('../EmployeeModel');
import {} from "../src/*";

require('express');
require('express-validator/check');
require('inversify-express-utils');



@controller('/partner')
export class EmployeeController {
    @httpPost('')
    public async create(@requestBody() reqBody: { name: string, dateOfBirth: string }, @response() res: Response): Promise<void> {
        let employee = new Employee(reqBody.name, reqBody.dateOfBirth);
        const createdEmployee = Employee.from((await EmployeeModel.create(employee)).toObject());
        res.status(HttpStatusCode.Created).json(createdEmployee);
    }
}
